<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>sign-up</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  </head>
  <body>
    <form
      class="card p-4 shadow-lg rounded-3 w-400px"
      style="width: 400px; margin: auto; margin-top: 70px"
      id="register"
      action=""
    >
      <h3 class="mt-2 text-center">Register your form</h3>
      <div class="row mt-3">
        <div class="col-sm-12 mt-2">
          <label for="">Name</label>
          <input name="Name" type="text" class="form-control mt-1" required />
        </div>
        <div class="col-sm-12 mt-2">
          <label for="">Address</label>
          <input name="Address" type="text" class="form-control mt-1" />
        </div>
        <div class="col-sm-12 mt-2">
          <label for="">Email</label>
          <input name="Email" type="email" class="form-control mt-1" required />
        </div>
        <div class="col-sm-12 mt-2">
          <label for="">Password</label>
          <input
            id="Password"
            name="Password"
            type="password"
            class="form-control mt-1"
            required
          />
        </div>
        <div class="col-sm-12 mt-2">
          <label for="">Confirm Password</label>
          <input
            id="cPassword"
            name="cPassword"
            type="password"
            class="form-control mt-1"
            required
          />
          <p id="isPsdMatch" style="color: red"></p>
        </div>
      </div>
      <button type="button" id="saveItem" class="btn btn-success mt-3">
        Create
      </button>
    </form>
  </body>

  <script src="./../ajax-library/ajax.js"></script>
  <script src="./../application-helper/apllication-helper.js"></script>
</html>
<script>
  (function () {
    const save = async (formData) => {
      try {
        const response = await saveAjax(
          "http://localhost:3000/register",
          formData
        );
        alert("User created successfully");
      } catch (error) {
        alert("Failed to create user: " + error);
      }
    };

    $("#saveItem").click(function () {
      const formData = getFormData("register");

      const password = formData.Password;
      const confirmPassword = formData.cPassword;
      if (password === confirmPassword) {
        save(formData);
      } else document.getElementById("isPsdMatch").innerHTML = "Password does not match";
    });
  })();
</script>
